# Проектирование
## Предварительный анализ
Приложение "Место" имеет довольно небольшой функционал и несложную бизнес-логику, frontend написан на React. Основная сложность приложения при дальнейшем развитии будет в основном в объёмах данных и учёте социального взаимодействия (лайки, возможно, комментарии в перспективе) на стороне backend, при относительно несложных изменениях в UI. Очевидно, разные модули (микросервисы) будут иметь различную нагрузку и потребности в масштабировании.

## Выбор технологий
В связи с этим, при разбиении на микрофронтенды, вижу смысл в том, чтобы и дальше придерживаться одного стека (React) для взаимозаменяемости разработчиков и обмена опытом. В качестве инструмента для разбиения на микрофронтенды выбран Module Federation, т.к. он вполне удовлетворяет потребностям и автор этих строк имел уже опыт работы с ним.

## Бизнес-функции приложения
Приложение имеет 4 основных ограниченных контекста
- Auth (IAM) - Авторизация, аутентификация
- User Profile - Профиль пользователя (создание и управление профилем)
- Places - Места (загрузка фотографий, просмотр, управление)
- Reactions - Реакции пользователей (лайки, в перспективе реакции в виде emoji и т.п.)

## Структура компонентов
В исходном приложении есть как готовые к переносу компоненты, так и компоненты, в которых смешана функциональность разных ограниченных контекстов. Например, компонент `Header` имеет общее назначение, но содержит отображение текущего пользователя и ссылки на вход\регистрацию, которые могут быть вынесены в отдельные компоненты микрофронтенда.

# Планирование изменений
## Разбиение на микрофронтенды
В соответствии с разделением на ограниченные контексты, разобьём приложение на 4 микрофронтенда - `auth`, `user-profile`, `places`, `reactions`, а также приложение `host`, которое будет точкой компоновки всех микрофронтендов.

### host
Это микрофронтенд-хост, отвечает за верхнеуровневую компоновку микрофронтендов в единый UI.
```
/host
	/src
		/components
			/header
				header.js
				header.css
			/footer
				footer.js
				footer.css
		App.jsx
		index.css
		index.html
		index.js
	package.json
	webpack.config.js
```
### auth
Микрофронтенд, предоставляющий компоненты для управления авторизацией и аутентификацией пользователя.
```
/users
	/src
		/components
			/register
				register.js
				register.css
			/login
				login.js
				login.css
			/auth-status-panel
				user-panel.js
				user-panel.css
		App.jsx
		index.css
		index.html
		index.js
	package.json
	webpack.config.js

```
### user-profile
Микрофронтенд, отвечающий за управление профилем пользователя
```
/user-profile
	/src
		/components
			/profile-panel
				profile-panel.js
				profile-panel.css
			/edit-profile-popup
				edit-profile-popup.js
				edit-profile-popup.css
			/edit-avatar-popup
				edit-avatar-popup.js
				edit-avatar-popup.css
		App.jsx
		index.css
		index.html
		index.js
	package.json
	webpack.config.js
```
### places
Микрофронтенд, отвечающий за отображение мест
```
/places
	/src
		/components
			/places-list
				places-list.js
				places-list.css
			/place-card
				place-card.js
				place-card.css
		App.jsx
		index.css
		index.html
		index.js
	package.json
	webpack.config.js
```
В случае с places, данный микрофронтенд будет использовать компонент `entity-reactions` из микрофронтенда `reactions`. Конечно, в актуальном приложении это всего лишь лайк (сердечко) с состоянием "Вкл/Выкл", но можно представить, что впоследствии это может быть комплексный элемент управления с отображением количества реакций, топ-5 эмоджи и т.д.
### reactions
Микрофронтенд, предоставляющий элементы управления реакциями пользователей на что-либо, в данном случае на "место". Но впоследствии, эти элементы управления можно "навесить" и на посты или комментарии пользователей, например. Компонент может быть параметризирован уникальным идентификатором "сущности", чтобы по нему подгрузить из BFF reactions данные по реакциям пользователя для этой "сущности"
```
/reactions
	/src
		/components
			/entity-reactions
				entity-reactions.js
				entity-reactions.css
		App.jsx
		index.css
		index.html
		index.js
	package.json
	webpack.config.js
```
